(()=>{"use strict";class t{constructor(t,i,s,e=0,h=0){this.y=i,this.x=t,this.img=new Image,this.img.src=s,this.shiftX=e,this.shiftY=h}get width(){return this.img.width}get height(){return this.img.height}move(){this.x=this.x+this.shiftX,this.y=this.y+this.shiftY}draw(t){t.drawImage(this.img,this.x,this.y)}stopMoving(){this.shiftX=0,this.shiftY=0}}class i extends t{constructor(t,i,s){super(t,i,"./images/balle24.png",5,2),this.theGame=s,this.ballmooving=!0}move(){this.ballmooving&&(this.y<=0||this.y+this.height>=this.theGame.canvas.height?this.shiftY=-this.shiftY:(this.x<0||this.x+this.width>=this.theGame.canvas.width)&&(this.ballmooving=!1),super.move())}collisionWith(t){let i=Math.max(this.x,t.x),s=Math.max(this.y,t.y),e=Math.min(this.x+this.img.width,t.x+t.width),h=Math.min(this.y+this.img.height,t.y+t.height);return i<=e&&s<=h}collision(t){if(this.collisionWith(t)){var i,s=Math.abs(this.y+this.height-t.y);(s>=0&&s<=8.6||s>=79.2&&s<=88)&&(i=4,console.log(i)),i=3,console.log(i),(s>17.16&&s<=26.4||s>=61.6&&s<70.4)&&(i=2,console.log(i)),(s>26.4&&s<=35.2||s>=52.8&&s<61.6)&&(i=1,console.log(i)),(s>35.2&&s<=44||s>44&&s<=52.8)&&(console.log("je suis aau milieux"),i=0,console.log(i)),this.shiftvalue(s,i,t)}}shiftvalue(t,i,s){t<=s.height/2&&(i=-Math.abs(i)),this.shiftY=i,this.shiftX=-this.shiftX}}class s extends t{constructor(t,i,s,e,h){super(t,i,"./images/paddle.png",s,e),this.mooving=1,this.Game=h}moveUP(){this.mooving=2,this.shiftY=-Math.abs(this.shiftY)}moveDOWN(){this.mooving=3,this.shiftY=+Math.abs(this.shiftY)}move(){2==this.mooving&&(this.y=Math.max(0,this.y+this.shiftY)),3==this.mooving&&(this.y=Math.min(this.Game.canvas.height-this.img.height,this.y+this.shiftY))}stopMoving(){this.mooving=1}}class e{constructor(t){this.raf=null,this.canvas=t,this.ball=new i(this.canvas.width/2,this.canvas.height/2,this),this.paddle=new s(this.canvas.width/50,this.canvas.height/2,0,8,this),this.paddle2=new s(this.canvas.width-50,this.canvas.height/2,0,8,this)}start(){this.animate()}stop(){window.cancelAnimationFrame(this.raf)}animate(){1==this.ball.ballmooving?(this.moveAndDraw(),this.raf=window.requestAnimationFrame(this.animate.bind(this))):this.score()}moveAndDraw(){const t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),this.ball.collision(this.paddle2),this.ball.collision(this.paddle),this.ball.move(),this.ball.draw(t),this.paddle.move(),this.paddle.draw(t),this.paddle2.move(),this.paddle2.draw(t)}score(){this.ball.x<=0&&(document.getElementById("scoreleft").innerHTML=parseInt(document.getElementById("scoreleft").innerHTML)+1),this.ball.x+this.ball.width>=this.canvas.width&&(document.getElementById("scoreright").innerHTML=parseInt(document.getElementById("scoreright").innerHTML)+1)}restart(){if(0==this.ball.ballmooving){const t=5;this.ball.x<=0?(this.ball.shiftX=t,this.ball.x=this.paddle.x+50,this.ball.y=this.paddle.y+this.paddle.height/2):(this.ball.shiftX=-t,this.ball.x=this.paddle2.x-50,this.ball.y=this.paddle2.y+this.paddle2.height/2),this.ball.shiftY=0,this.ball.ballmooving=!0,this.raf=window.requestAnimationFrame(this.animate.bind(this))}}KeydownactionHandler(t){switch(t.key){case"ArrowUp":case"Up":this.paddle.moveUP();break;case" ":case"spacebar":this.restart();break;case"q":this.paddle2.moveUP();break;case"ArrowDown":case"Down":this.paddle.moveDOWN();break;case"a":this.paddle2.moveDOWN();break;default:return}t.preventDefault()}keyUpActionHandler(t){switch(t.key){case"ArrowDown":case"Down":case"ArrowUp":case"Up":this.paddle.stopMoving();case"q":case"a":this.paddle2.stopMoving();break;default:return}t.preventDefault()}}window.addEventListener("load",(()=>{const t=document.getElementById("field"),i=new e(t);document.getElementById("start").addEventListener("click",(()=>a(i))),window.addEventListener("keydown",i.KeydownactionHandler.bind(i)),window.addEventListener("keyup",i.keyUpActionHandler.bind(i))}));let h=!1;const a=t=>{h?(document.getElementById("start").value="jouer",t.stop()):(t.start(),document.getElementById("start").value="stop"),h=!h}})();